{"version":1,"ops":[{"type":1,"author":{"id":"d94491c6df6dc52f4e132989f7ed217c066eb2cc"},"timestamp":1399959087,"metadata":{"github-id":"MDU6SXNzdWUzMzM2OTc3Nw==","github-url":"https://github.com/rurban/B-Stats/issues/1","origin":"github"},"title":"won't build and run on win32","message":"First issue\n\n```\nC:\\sources\\B-Stats\u003eperl makefile.pl\nChecking if your kit is complete...\nWarning: the following files are missing in your kit:\n        lib/B/Stats/Minus.pm\n        META.yml\nPlease inform the author.\nGenerating a nmake-style Makefile\nWriting Makefile for B::Stats\nWriting MYMETA.yml and MYMETA.json\n```\n\nFix the manifest/.gitignore until there are no conflicts. I am using the git repo, so some things might be going into the tarball that aren't in the repo.\n\nNext, Perl_debop isn't exported, and on Win32, symbols aren't extern/public unless explicitly labeled as such, so this doesn't build.\n\n```\nC:\\sources\\B-Stats\u003enmake test\n\nMicrosoft (R) Program Maintenance Utility Version 7.10.3077\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ncp lib/B/Stats/Minus.pm.tmpl blib\\lib\\B\\Stats\\Minus.pm.tmpl\ncp lib/B/Stats.pm blib\\lib\\B\\Stats.pm\nRunning Mkbootstrap for B::Stats ()\n        C:\\perl519\\bin\\perl.exe -MExtUtils::Command -e chmod -- 644 Stats.bs\n        C:\\perl519\\bin\\perl.exe C:\\perl519\\lib\\ExtUtils\\xsubpp  -typemap C:\\perl\n519\\lib\\ExtUtils\\typemap  Stats.xs \u003e Stats.xsc \u0026\u0026 C:\\perl519\\bin\\perl.exe -MExtU\ntils::Command -e mv -- Stats.xsc Stats.c\n        cl -c    -nologo -GF -W3 -O1 -MD -Zi -DNDEBUG -G7 -GL -DWIN32 -D_CONSOLE\n -DNO_STRICT -DPERL_TEXTMODE_SCRIPTS -DPERL_HASH_FUNC_ONE_AT_A_TIME -DPERL_IMPLI\nCIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -D_USE_32BIT_TIME_T -O1 -MD -Zi -DN\nDEBUG -G7 -GL    -DVERSION=\\\"0.05\\\"  -DXS_VERSION=\\\"0.05\\\"  \"-IC:\\perl519\\lib\\CO\nRE\"   Stats.c\nStats.c\n        C:\\perl519\\bin\\perl.exe -MExtUtils::Mksymlists  -e \"Mksymlists('NAME'=\u003e\\\n\"B::Stats\\\", 'DLBASE' =\u003e 'Stats', 'DL_FUNCS' =\u003e {  }, 'FUNCLIST' =\u003e [], 'IMPORTS\n' =\u003e {  }, 'DL_VARS' =\u003e []);\"\n        link -out:blib\\arch\\auto\\B\\Stats\\Stats.dll -dll -nologo -nodefaultlib -d\nebug -opt:ref,icf -ltcg  -libpath:\"c:\\perl519\\lib\\CORE\"  -machine:x86 Stats.obj\n  C:\\perl519\\lib\\CORE\\perl519.lib oldnames.lib kernel32.lib user32.lib gdi32.lib\n winspool.lib  comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib  net\napi32.lib uuid.lib ws2_32.lib mpr.lib winmm.lib  version.lib odbc32.lib odbccp32\n.lib comctl32.lib msvcrt.lib -def:Stats.def\n   Creating library blib\\arch\\auto\\B\\Stats\\Stats.lib and object blib\\arch\\auto\\B\n\\Stats\\Stats.exp\nStats.obj : error LNK2001: unresolved external symbol __imp__Perl_debop\nblib\\arch\\auto\\B\\Stats\\Stats.dll : fatal error LNK1120: 1 unresolved externals\nNMAKE : fatal error U1077: 'link' : return code '0x460'\nStop.\n\nC:\\sources\\B-Stats\u003e\n```\n\ncommenting out that line with Perl_debop causes test fails\n\n```\n    C:\\perl519\\bin\\perl.exe \"-MExtUtils::Command::MM\" \"-MTest::Harness\" \"-e\" \"undef *Test::Harness::Switches; test_harness(0, 'blib\\lib', 'blib\\arch')\" t/*.t\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require at (eval 3) line 18.\nBEGIN failed--compilation aborted at (eval 3) line 18.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MO=Stats'\n#   at t/compile.t line 11.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MB::Stats -c'\n#   at t/compile.t line 15.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\n\n#   Failed test '-MB::Stats -e'\n#   at t/compile.t line 16.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static end-time:)'\n\n#   Failed test '-MB::Stats -r'\n#   at t/compile.t line 17.\n#                   ''\n#     doesn't match '(?^m:^B::Stats dynamic run-time:)'\n# Looks like you failed 4 tests of 5.\nt/compile.t ................. \nDubious, test returned 4 (wstat 1024, 0x400)\nFailed 4/5 subtests \n# compare B::Terse with B::Stats\nCan't find string terminator \"'\" anywhere before EOF.\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require at (eval 3) line 18.\nBEGIN failed--compilation aborted at (eval 3) line 18.\nBEGIN failed--compilation aborted.\nt/exact.t ................... ok\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MB::Stats=-c,-u =\u003e c'\n#   at t/options.t line 12.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\n\n#   Failed test 'nextstate \u003e 0'\n#   at t/options.t line 17.\n#                   ''\n#     doesn't match '(?^m:^nextstate\\s+[1-9]\\d+$)'\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MB::Stats -r'\n#   at t/options.t line 22.\n#                   ''\n#     doesn't match '(?^m:^B::Stats dynamic run-time:)'\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require at (eval 3) line 18.\nBEGIN failed--compilation aborted at (eval 3) line 18.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MO=Stats,-c,-u =\u003e c'\n#   at t/options.t line 26.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MO=Stats,-ceu =\u003e c'\n#   at t/options.t line 32.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\n\n#   Failed test '-MO=Stats,-ceu =\u003e e'\n#   at t/options.t line 33.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static end-time:)'\n# Looks like you failed 6 tests of 15.\nt/options.t ................. \nDubious, test returned 6 (wstat 1536, 0x600)\nFailed 6/15 subtests \nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MB::Stats=-r =\u003e r'\n#   at t/runtime.t line 13.\n#                   ''\n#     doesn't match '(?^m:^B::Stats dynamic run-time:)'\n\n#   Failed test '-MB::Stats,-r =\u003e !u'\n#   at t/runtime.t line 14.\n#                   ''\n#     doesn't match '(?^m:^op class:)'\n\n#   Failed test 'nextstate \u003e 0'\n#   at t/runtime.t line 16.\n#                   ''\n#     doesn't match '(?^m:^nextstate\\s+[1-9]\\d*$)'\n\n#   Failed test 'COP \u003e 0'\n#   at t/runtime.t line 17.\n#                   ''\n#     doesn't match '(?^m:^COP\\s+[1-9]\\d*$)'\n# Looks like you failed 4 tests of 6.\nt/runtime.t ................. \nDubious, test returned 4 (wstat 1024, 0x400)\nFailed 4/6 subtests \nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MB::Stats=-t =\u003e c'\n#   at t/table.t line 11.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\n\n#   Failed test '-MB::Stats=-t =\u003e e'\n#   at t/table.t line 12.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static end-time:)'\n\n#   Failed test '-MB::Stats=-t =\u003e r'\n#   at t/table.t line 13.\n#                   ''\n#     doesn't match '(?^m:^B::Stats dynamic run-time:)'\n\n#   Failed test '-MB::Stats,-t =\u003e !u'\n#   at t/table.t line 14.\n#                   ''\n#     doesn't match '(?^m:^op class:)'\n\n#   Failed test '-MB::Stats,-t =\u003e t'\n#   at t/table.t line 15.\n#                   ''\n#     doesn't match '(?^m:^B::Stats table:)'\n\n#   Failed test 'nextstate in -c'\n#   at t/table.t line 17.\n#                   ''\n#     doesn't match '(?^m:^nextstate\\s+[1-9]\\d+$)'\n\n#   Failed test 'nextstate in table'\n#   at t/table.t line 18.\n#                   ''\n#     doesn't match '(?^m:^nextstate\\s+[1-9]\\d+\\s+[1-9]\\d+\\s+)'\nCan't locate B/Stats/Minus.pm in @INC (you may need to install the B::Stats::Minus module) (@INC contains: C:\\sources\\B-Stats\\blib\\arch C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\lib C:\\sources\\B-Stats\\blib\\arch C:/perl519/site/lib C:/perl519/lib .) at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nBEGIN failed--compilation aborted at C:\\sources\\B-Stats\\blib\\lib/B/Stats.pm line 101.\nCompilation failed in require.\nBEGIN failed--compilation aborted.\n\n#   Failed test '-MB::Stats=-t,-u =\u003e c'\n#   at t/table.t line 22.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static compile-time:)'\n\n#   Failed test '-MB::Stats=-t,-u =\u003e e'\n#   at t/table.t line 23.\n#                   ''\n#     doesn't match '(?^m:^B::Stats static end-time:)'\n\n#   Failed test '-MB::Stats=-t,-u =\u003e r'\n#   at t/table.t line 24.\n#                   ''\n#     doesn't match '(?^m:^B::Stats dynamic run-time:)'\n\n#   Failed test '-MB::Stats,-t,-u =\u003e t'\n#   at t/table.t line 26.\n#                   ''\n#     doesn't match '(?^m:^B::Stats table:)'\n\n#   Failed test 'nextstate in table (c+e)'\n#   at t/table.t line 29.\n#                   ''\n#     doesn't match '(?^m:^nextstate\\s+[1-9]\\d+\\s+[1-9]\\d+)'\n\n#   Failed test 'nextstate in table (c+e+r)'\n#   at t/table.t line 30.\n#                   ''\n#     doesn't match '(?^m:^nextstate\\s+[1-9]\\d*\\s+[1-9]\\d*\\s+[1-9]\\d*)'\n# Looks like you failed 13 tests of 15.\nt/table.t ................... \nDubious, test returned 13 (wstat 3328, 0xd00)\nFailed 13/15 subtests \nt/z_kwalitee.t .............. skipped: Test::Kwalitee needed for testing kwalitee\nt/z_meta.t .................. skipped: Test::CPAN::Meta 0.12 not available for testing\nt/z_perl_minimum_version.t .. skipped: Perl::MinimumVersion 1.20 not available for testing\nt/z_pod-coverage.t .......... skipped: Test::Pod::Coverage 1.04 required for testing POD coverage\nt/z_pod.t ................... skipped: Test::Pod 1.00 required for testing POD\n\nTest Summary Report\n-------------------\nt/compile.t               (Wstat: 1024 Tests: 5 Failed: 4)\n  Failed tests:  1, 3-5\n  Non-zero exit status: 4\nt/options.t               (Wstat: 1536 Tests: 15 Failed: 6)\n  Failed tests:  1, 5, 8-9, 12-13\n  Non-zero exit status: 6\nt/runtime.t               (Wstat: 1024 Tests: 6 Failed: 4)\n  Failed tests:  3-6\n  Non-zero exit status: 4\nt/table.t                 (Wstat: 3328 Tests: 15 Failed: 13)\n  Failed tests:  1-10, 12, 14-15\n  Non-zero exit status: 13\nFiles=10, Tests=44,  2 wallclock secs ( 0.03 usr +  0.05 sys =  0.08 CPU)\nResult: FAIL\nFailed 4/10 test programs. 27/44 subtests failed.\nNMAKE : fatal error U1077: 'C:\\perl519\\bin\\perl.exe' : return code '0xff'\nStop.\n```","files":null}]}